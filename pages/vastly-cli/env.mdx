# `vastly env`
import { Text, SimpleGrid } from '@vastly/ui'
import { Callout, Tab, Tabs } from 'nextra-theme-docs'

The `vastly env` command is used to store and manage secrets and environment variables, providing functionality to add, remove, and pull variables per account. All variables are securely stored using DynamoDB.

<Callout type="info">
You will need the AWS credentials of the account/stage your are trying to access. <br/>Visit the Vastly CLI [Get Started Page](/vastly-cli)
</Callout>

## Usage
To leverage the environment variables locally, <b>navigate into the root directory of your working repository</b> and run `vastly env pull`. This will trigger a series of command-line questions prompting you to input a custom file name and choose where in your repo you'd like to write the env file to. Make sure to check your command-line for confirmation or errors. If there are no stored envs for this account, you will be prompted to get started by running `vastly env add`. The first time through, this command will look for an `env` table in the specified account's DynamoDB. If one is not found, it will create one along with adding your first environment variable. After updating environment variables (through `vastly env add`, or `vastly env delete`), you will have the ability to view your variables in real time via the command-line.

<Callout type="warning" emoji="⚠️">
   All commands will now require a `stage` argument. <br/>The following stages are allowable: [`sandbox`, `local`, `uat`, `prod`]
</Callout>

## Commands
### ADD
Add an environment variable or secret to the specific AWS account. Follow the prompts to add individual envs or ingest a file for a bulk add. You will have the ability to view your variables in your terminal after your addition.
  ```bash copy filename="terminal"
  vastly env add [-st, --stage] <stage>
  ```

### DELETE
Remove an environment variable or secret from your managed env service. Key name is case sensitive. You will have the ability to view your variables in your terminal before and after your deletion.
  ```bash copy filename="terminal"
  vastly env delete [-st, --stage] <stage>
  ```

### PULL
<Callout>
Make sure you are in the correct repository
</Callout>
Use the `pull` command and follow the prompts to specify the app, stage, and filename to write to. Use the `pull --all` command to quickly pull all the envs for the specified stage. This will write a `.env` file to the root of your working directory.

<Tabs items={["pull", "pull all"]}>
  <Tab>
  ```bash copy filename="terminal"
    vastly env pull [-st, --stage] <stage>
  ```
  </Tab>
  <Tab>
  ```bash copy filename="terminal"
  vastly env pull [-a, --all] [-st, --stage] <stage>

  ```
   </Tab>
</Tabs>

## Upcoming Enhancements
<SimpleGrid columns={2} spacing={10} mt={10}>
  <Text>- Bulk Delete</Text>
  <Text>- Better Edge Case and Error Handling</Text>
</SimpleGrid>
